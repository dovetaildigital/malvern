import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.BVOCwoKb.js";function y({field:a,value:r,onChange:c}){const l={id:a.name,name:a.name,required:a.required,value:r,onChange:i=>c(i.target.value),placeholder:a.placeholder,className:"block w-full"},n="w-24",o="flex items-top mb-4 border-b border-fadedgrey";switch(a.type){case"textarea":return e.jsxs("div",{className:o,children:[e.jsxs("label",{htmlFor:a.name,className:`body text-foreground ${n} pr-4 text-left`,children:[a.label,a.required&&e.jsx("span",{className:"text-red-500"})]}),e.jsx("textarea",{...l,rows:4,className:`${l.className} min-h-[100px] flex-grow resize-none placeholder:body`})]});case"select":const i=(a.options||"").split(`
`).filter(m=>m.trim()!=="");return e.jsxs("div",{className:o,children:[e.jsxs("label",{htmlFor:a.name,className:`body text-foreground ${n} pr-4 text-left`,children:[a.label,a.required&&e.jsx("span",{className:"text-red-500"})]}),e.jsxs("select",{...l,className:`${l.className} flex-grow`,value:r,children:[e.jsx("option",{value:"",children:"Select an option"}),i.map((m,h)=>e.jsx("option",{value:m.trim(),children:m.trim()},h))]})]});case"checkbox":return e.jsxs("div",{className:"flex items-start mb-4",children:[e.jsx("input",{id:a.name,name:a.name,type:"checkbox",checked:r==="true",onChange:m=>c(String(m.target.checked)),className:"h-8 w-8 rounded border-fadedgrey text-foreground focus:ring-foreground"}),e.jsxs("label",{htmlFor:a.name,className:"ml-3 text-foreground body",children:[a.label,a.required&&e.jsx("span",{className:"text-red-500"})]})]});default:return e.jsxs("div",{className:o,children:[e.jsxs("label",{htmlFor:a.name,className:`body text-foreground ${n} pr-4 text-left`,children:[a.label,a.required&&e.jsx("span",{className:"text-red-500"})]}),e.jsx("input",{type:a.type||"text",...l,className:`${l.className} flex-grow`})]})}}const j=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,44H32A12,12,0,0,0,20,56V192a20,20,0,0,0,20,20H216a20,20,0,0,0,20-20V56A12,12,0,0,0,224,44Zm-96,83.72L62.85,68h130.3ZM92.79,128,44,172.72V83.28Zm17.76,16.28,9.34,8.57a12,12,0,0,0,16.22,0l9.34-8.57L193.15,188H62.85ZM163.21,128,212,83.28v89.44Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,56l-96,88L32,56Z",opacity:"0.2"}),t.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,50H32a6,6,0,0,0-6,6V192a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A6,6,0,0,0,224,50Zm-96,85.86L47.42,62H208.58ZM101.67,128,38,186.36V69.64Zm8.88,8.14L124,148.42a6,6,0,0,0,8.1,0l13.4-12.28L208.58,194H47.43ZM154.33,128,218,69.64V186.36Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,52H32a4,4,0,0,0-4,4V192a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A4,4,0,0,0,224,52Zm-96,86.57L42.28,60H213.72ZM104.63,128,36,190.91V65.09Zm5.92,5.43L125.3,147a4,4,0,0,0,5.4,0l14.75-13.52L213.72,196H42.28ZM151.37,128,220,65.09V190.91Z"}))]]),N=t.createContext({color:"currentColor",size:"1em",weight:"regular",mirrored:!1}),x=t.forwardRef((a,r)=>{const{alt:c,color:l,size:n,weight:o,mirrored:i,children:m,weights:h,...s}=a,{color:d="currentColor",size:u,weight:g="regular",mirrored:b=!1,...f}=t.useContext(N);return t.createElement("svg",{ref:r,xmlns:"http://www.w3.org/2000/svg",width:n??u,height:n??u,fill:l??d,viewBox:"0 0 256 256",transform:i||b?"scale(-1, 1)":void 0,...f,...s},!!c&&t.createElement("title",null,c),m,h.get(o??g))});x.displayName="IconBase";const p=t.forwardRef((a,r)=>t.createElement(x,{ref:r,...a,weights:j}));p.displayName="EnvelopeIcon";const w=p,Z=({variant:a="primary",children:r,className:c="",...l})=>{const o={primary:"btn btn-primary",secondary:"btn btn-secondary",default:"btn btn-default"}[a]||"";return e.jsx("button",{className:`${o} ${c}`,...l,children:r})};function v({form:a}){const[r,c]=t.useState(Object.fromEntries(a.fields.map(s=>[s.formFieldName,s.formFieldsDefault||""]))),[l,n]=t.useState(!1),[o,i]=t.useState(null),m=(s,d)=>{c(u=>({...u,[s]:d}))},h=async s=>{s.preventDefault(),console.log("Submitting form",r);try{if(!(await fetch(`http://localhost:10008/wp-json/custom-forms/v1/submit/${a.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Submission failed");n(!0)}catch{i("There was an issue submitting the form. Please try again.")}};return e.jsx("div",{children:l?e.jsxs("div",{className:"bg-lightgrey border-fadedgrey border rounded-lg p-4 text-foreground space-y-4",children:[e.jsxs("h4",{className:"heading-3",children:["Nice to meet you",r.name?`, ${r.name}`:"","!"]}),r.email&&e.jsxs("p",{className:"body",children:["I'll reply to you at ",e.jsx("strong",{children:r.email})," as soon as I can."]})]}):e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.fields.map((s,d)=>e.jsx(y,{field:{label:s.formFieldLabel,name:s.formFieldName,type:s.formFieldType,required:s.formFieldsRequired,placeholder:s.formFieldsPlaceholder,options:s.formFieldsOptions,default:s.formFieldsDefault},value:r[s.formFieldName]||"",onChange:u=>m(s.formFieldName,u)},d)),o&&e.jsx("p",{className:"text-red-600",children:o}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(Z,{type:"submit",variant:"primary",className:"items-end flex justify-center",children:["Send ",e.jsx(w,{className:"w-6 h-6"})]})})]})})}function H({form:a,intro:r}){return e.jsx("section",{className:"max-w-xl mx-auto px-4 py-18 lg:py-24","data-fade":!0,children:e.jsxs("div",{className:"container mx-auto p-8 space-y-8 bg-white rounded-lg shadow",children:[r&&e.jsx("div",{className:"body",dangerouslySetInnerHTML:{__html:r}}),e.jsx(v,{form:a})]})})}export{H as default};
