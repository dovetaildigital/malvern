import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.BVOCwoKb.js";import{M as S,C as T,b as P,P as V,D as W,u as A,L as F,m as v}from"./proxy.CZpQSHvn.js";class H extends r.Component{getSnapshotBeforeUpdate(a){const e=this.props.childRef.current;if(e&&a.isPresent&&!this.props.isPresent){const o=e.offsetParent,i=T(o)&&o.offsetWidth||0,n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft,n.right=i-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function K({children:t,isPresent:a,anchorX:e}){const o=r.useId(),i=r.useRef(null),n=r.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=r.useContext(S);return r.useInsertionEffect(()=>{const{width:m,height:l,top:g,left:c,right:u}=n.current;if(a||!i.current||!m||!l)return;const p=e==="left"?`left: ${c}`:`right: ${u}`;i.current.dataset.motionPopId=o;const f=document.createElement("style");return h&&(f.nonce=h),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${l}px !important;
            ${p}px !important;
            top: ${g}px !important;
          }
        `),()=>{document.head.contains(f)&&document.head.removeChild(f)}},[a]),s.jsx(H,{isPresent:a,childRef:i,sizeRef:n,children:r.cloneElement(t,{ref:i})})}const U=({children:t,initial:a,isPresent:e,onExitComplete:o,custom:i,presenceAffectsLayout:n,mode:h,anchorX:m})=>{const l=P(B),g=r.useId();let c=!0,u=r.useMemo(()=>(c=!1,{id:g,initial:a,isPresent:e,custom:i,onExitComplete:p=>{l.set(p,!0);for(const f of l.values())if(!f)return;o&&o()},register:p=>(l.set(p,!1),()=>l.delete(p))}),[e,l,o]);return n&&c&&(u={...u}),r.useMemo(()=>{l.forEach((p,f)=>l.set(f,!1))},[e]),r.useEffect(()=>{!e&&!l.size&&o&&o()},[e]),h==="popLayout"&&(t=s.jsx(K,{isPresent:e,anchorX:m,children:t})),s.jsx(V.Provider,{value:u,children:t})};function B(){return new Map}const j=t=>t.key||"";function k(t){const a=[];return r.Children.forEach(t,e=>{r.isValidElement(e)&&a.push(e)}),a}const G=({children:t,custom:a,initial:e=!0,onExitComplete:o,presenceAffectsLayout:i=!0,mode:n="sync",propagate:h=!1,anchorX:m="left"})=>{const[l,g]=W(h),c=r.useMemo(()=>k(t),[t]),u=h&&!l?[]:c.map(j),p=r.useRef(!0),f=r.useRef(c),C=P(()=>new Map),[N,L]=r.useState(c),[y,$]=r.useState(c);A(()=>{p.current=!1,f.current=c;for(let x=0;x<y.length;x++){const d=j(y[x]);u.includes(d)?C.delete(d):C.get(d)!==!0&&C.set(d,!1)}},[y,u.length,u.join("-")]);const w=[];if(c!==N){let x=[...c];for(let d=0;d<y.length;d++){const b=y[d],M=j(b);u.includes(M)||(x.splice(d,0,b),w.push(b))}return n==="wait"&&w.length&&(x=w),$(k(x)),L(c),null}const{forceRender:z}=r.useContext(F);return s.jsx(s.Fragment,{children:y.map(x=>{const d=j(x),b=h&&!l?!1:c===y||u.includes(d),M=()=>{if(C.has(d))C.set(d,!0);else return;let E=!0;C.forEach(D=>{D||(E=!1)}),E&&(z?.(),$(f.current),h&&g?.(),o&&o())};return s.jsx(U,{isPresent:b,initial:!p.current||e?void 0:!1,custom:a,presenceAffectsLayout:i,mode:n,onExitComplete:b?void 0:M,anchorX:m,children:x},d)})})};function I({isOpen:t,toggle:a}){return s.jsx("button",{onClick:a,"aria-label":"Toggle menu","aria-expanded":t,className:"text-2xl",children:s.jsx("i",{className:`ph ${t?"ph-x":"ph-list"}`})})}const X={hidden:{opacity:1,y:0,height:0,transition:{duration:.3,ease:[.16,1,.3,1]}},visible:{y:0,height:"calc(100vh - 76px)",transition:{duration:.3,ease:[.16,1,.3,1],when:"beforeChildren"}},exit:{y:0,height:0,transition:{duration:.2,ease:[.16,1,.3,1],when:"afterChildren"}}},_={hidden:{opacity:0,transition:{when:"afterChildren",staggerChildren:.02,staggerDirection:-1}},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.03,delayChildren:.1}},exit:{opacity:0,transition:{when:"afterChildren",staggerChildren:.02,staggerDirection:-1}}},R={hidden:{opacity:0,y:10,transition:{duration:.2,ease:[.16,1,.3,1]}},visible:{opacity:1,y:0,transition:{duration:.25,ease:[.16,1,.3,1]}},exit:{opacity:0,y:10,transition:{duration:.15,ease:[.16,1,.3,1]}}};function q({isOpen:t,toggle:a,menu:e,actionItems:o=[]}){return r.useEffect(()=>(document.body.classList.toggle("overflow-hidden",t),()=>document.body.classList.remove("overflow-hidden")),[t]),s.jsx(G,{mode:"wait",children:t&&s.jsx(v.div,{initial:"hidden",animate:"visible",exit:"exit",variants:X,className:"fixed top-[76px] left-0 w-full z-40 bg-gradient-background backdrop-blur-xl border-t border-slate-100 overflow-hidden",style:{willChange:"transform, opacity"},children:s.jsxs(v.div,{className:"h-full px-6 py-4 flex flex-col",variants:_,children:[s.jsx("nav",{className:"flex-1 flex flex-col gap-4 text-lg font-medium tracking-tight",children:e.flatMap(({menuItem:i,submenu:n=[]},h)=>{const m=Array.isArray(n)?n:[];return[s.jsx(v.a,{href:i.url,className:"relative inline-flex items-center justify-between w-full py-2 text-xl font-semibold tracking-tight text-slate-900 hover:text-sky-600 transition-colors duration-300",variants:R,children:i.title},`main-${i.url}-${h}`),...m.map(({link:l},g)=>s.jsx(v.a,{href:l.url,variants:R,className:"block text-base text-slate-600 py-1 pl-4 transition-colors hover:text-sky-500",children:l.title},`sub-${l.url}-${h}-${g}`))]})}),o.length>0&&s.jsx(v.div,{className:"mt-auto pt-4 border-t border-slate-100",variants:R,children:s.jsx("div",{className:"flex flex-col gap-3",children:o.map(({menuItem:i},n)=>s.jsx("a",{href:i.url,className:"action-link block w-full text-center",children:s.jsx("span",{className:"gradient-fill block w-full py-3 px-6 rounded-full text-sm font-semibold",children:i.title})},`action-${i.url}-${n}`))})})]})},"mobile-panel")})}function Z({menu:t,actionItems:a=[]}){const[e,o]=r.useState(!1),i=()=>{o(n=>!n)};return s.jsxs(s.Fragment,{children:[s.jsx(I,{isOpen:e,toggle:i}),s.jsx(q,{isOpen:e,toggle:i,menu:t,actionItems:a})]})}export{Z as default};
