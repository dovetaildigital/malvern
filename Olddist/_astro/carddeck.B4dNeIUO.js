import{j as p}from"./jsx-runtime.D_zvdyIk.js";import{r as C}from"./index.BVOCwoKb.js";import{I as ae}from"./icon.D_dN0l3q.js";import{u as q}from"./use-motion-value.cXacd6D_.js";import{e as re,r as ie,g as oe,h as le,j as Z,k as ue,l as ce,n as fe,o as me,p as he,q as pe,V as de,t as ge,v as ye,w as xe,S as Ae,H as Se,x as F,y as ve,z as Ee,A as be,m as we}from"./proxy.CZpQSHvn.js";const De=(e,t,n)=>{const s=t-e;return((n-e)%s+s)%s+e};function ee(e,t){return re(e)?e[De(0,e.length,t)]:e}class Ve{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t){const n=this.animations.map(s=>s.attachTimeline(t));return()=>{n.forEach((s,r)=>{s&&s(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class je extends Ve{then(t,n){return this.finished.finally(t).then(()=>{})}}function R(e){return typeof e=="object"&&!Array.isArray(e)}function te(e,t,n,s){return typeof e=="string"&&R(t)?ie(e,n,s):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function Te(e,t,n){return e*(t+1)}function J(e,t,n,s){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):s.get(t)??e}function Me(e,t,n){for(let s=0;s<e.length;s++){const r=e[s];r.at>t&&r.at<n&&(le(e,r),s--)}}function Ne(e,t,n,s,r,a){Me(e,r,a);for(let i=0;i<t.length;i++)e.push({value:t[i],at:oe(r,a,s[i]),easing:ee(n,i)})}function Oe(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function Ce(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const Ie="easeInOut";function Ge(e,{defaultTransition:t={},...n}={},s,r){const a=t.duration||.3,i=new Map,o=new Map,u={},m=new Map;let y=0,c=0,I=0;for(let D=0;D<e.length;D++){const d=e[D];if(typeof d=="string"){m.set(d,c);continue}else if(!Array.isArray(d)){m.set(d.name,J(c,d.at,y,m));continue}let[w,g,f={}]=d;f.at!==void 0&&(c=J(c,f.at,y,m));let h=0;const V=(x,A,E,j=0,T=0)=>{const l=Le(x),{delay:H=0,times:S=ue(l),type:K="keyframes",repeat:G,repeatType:Ue,repeatDelay:Ye=0,...se}=A;let{ease:b=t.ease||"easeOut",duration:v}=A;const _=typeof H=="function"?H(j,T):H,W=l.length,B=me(K)?K:r?.[K||"keyframes"];if(W<=2&&B){let M=100;if(W===2&&Fe(l)){const N=l[1]-l[0];M=Math.abs(N)}const L={...se};v!==void 0&&(L.duration=he(v));const k=ce(L,M,B);b=k.ease,v=k.duration}v??(v=a);const $=c+_;S.length===1&&S[0]===0&&(S[1]=1);const P=S.length-l.length;if(P>0&&fe(S,P),l.length===1&&l.unshift(null),G){v=Te(v,G);const M=[...l],L=[...S];b=Array.isArray(b)?[...b]:[b];const k=[...b];for(let N=0;N<G;N++){l.push(...M);for(let O=0;O<M.length;O++)S.push(L[O]+(N+1)),b.push(O===0?"linear":ee(k,O-1))}Oe(S,G)}const X=$+v;Ne(E,l,b,S,$,X),h=Math.max(_+v,h),I=Math.max(X,I)};if(Z(w)){const x=Q(w,o);V(g,f,U("default",x))}else{const x=te(w,g,s,u),A=x.length;for(let E=0;E<A;E++){g=g,f=f;const j=x[E],T=Q(j,o);for(const l in g)V(g[l],ke(f,l),U(l,T),E,A)}}y=c,c+=h}return o.forEach((D,d)=>{for(const w in D){const g=D[w];g.sort(Ce);const f=[],h=[],V=[];for(let A=0;A<g.length;A++){const{at:E,value:j,easing:T}=g[A];f.push(j),h.push(pe(0,I,E)),V.push(T||"easeOut")}h[0]!==0&&(h.unshift(0),f.unshift(f[0]),V.unshift(Ie)),h[h.length-1]!==1&&(h.push(1),f.push(null)),i.has(d)||i.set(d,{keyframes:{},transition:{}});const x=i.get(d);x.keyframes[w]=f,x.transition[w]={...t,duration:I,ease:V,times:h,...n}}}),i}function Q(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function U(e,t){return t[e]||(t[e]=[]),t[e]}function Le(e){return Array.isArray(e)?e:[e]}function ke(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const ze=e=>typeof e=="number",Fe=e=>e.every(ze);function He(e,t){return e in t}class Ke extends de{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(He(n,t)){const s=t[n];if(typeof s=="string"||typeof s=="number")return s}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return ge()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function Re(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=ye(e)&&!xe(e)?new Ae(t):new Se(t);n.mount(e),F.set(e,n)}function _e(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Ke(t);n.mount(e),F.set(e,n)}function We(e,t){return Z(e)||typeof e=="number"||typeof e=="string"&&!R(t)}function ne(e,t,n,s){const r=[];if(We(e,t))r.push(ve(e,R(t)&&t.default||t,n&&(n.default||n)));else{const a=te(e,t,s),i=a.length;for(let o=0;o<i;o++){const u=a[o],m=u instanceof Element?Re:_e;F.has(u)||m(u);const y=F.get(u),c={...n};"delay"in c&&typeof c.delay=="function"&&(c.delay=c.delay(o,i)),r.push(...Ee(y,{...t,transition:c},{}))}}return r}function Be(e,t,n){const s=[];return Ge(e,t,n,{spring:be}).forEach(({keyframes:a,transition:i},o)=>{s.push(...ne(o,a,i))}),s}function $e(e){return Array.isArray(e)&&e.some(Array.isArray)}function Pe(e){function t(n,s,r){let a=[];return $e(n)?a=Be(n,s,e):a=ne(n,s,r,e),new je(a)}return t}const z=Pe(),Xe=300,qe=32,Y=60,Je=({item:e,index:t,draggingId:n,topCardId:s,setTopCardId:r})=>{const a=e.cardDeckHeadline??`card-${t}`,i=q(0),o=q(0);return C.useEffect(()=>{z(i,0,{type:"spring",stiffness:50}),z(o,0,{type:"spring",stiffness:50})},[]),p.jsx(we.div,{style:{x:i,y:o,zIndex:s===a?50:n.current===a?49:t-1,borderRadius:16,padding:"1rem",boxShadow:n.current===a?"0 25px 50px rgba(0,0,0,0.35)":"0 10px 20px rgba(0,0,0,0.15)",overflow:"hidden",touchAction:"none",userSelect:"none",display:"flex",flexDirection:"column",transition:"box-shadow 0.2s ease"},drag:!0,className:"bg-gradient-primary w-[300px] h-[250px] shrink-0",dragConstraints:{top:-50,bottom:50,left:-150,right:150},dragElastic:.25,dragMomentum:!1,onDragStart:()=>{n.current=a,r(a)},onDragEnd:(u,m)=>{n.current=null,z(i,0,{type:"spring",stiffness:300,damping:28}),z(o,0,{type:"spring",stiffness:300,damping:28})},whileHover:{scale:1.02,boxShadow:"0 12px 24px rgba(0,0,0,0.2)"},whileTap:{cursor:"grabbing",scale:1.04},children:p.jsxs("div",{className:"card flex flex-col",children:[p.jsxs("div",{className:"flex items-start gap-4 p-4 bg-white",children:[e.cardDeckIcon&&p.jsx(ae,{icon:e.cardDeckIcon,className:"w-8 h-8 shrink-0"}),e.cardDeckHeadline&&p.jsx("h3",{className:"card-label",children:e.cardDeckHeadline})]}),e.cardDeckDescription&&p.jsx("p",{className:"card-body",children:e.cardDeckDescription})]})})},Qe=(e,t)=>{const n=[];let s=[],r=0;for(let a=0;a<e.length;a++)s.push(e[a]),r++,(r===t||a===e.length-1)&&(n.push(s),r=0,s=[],t=Math.min(t,e.length-n.flat().length));return n},at=({cardDeckItem:e})=>{const t=C.useRef(null),[n,s]=C.useState(null),[r,a]=C.useState([]),i=()=>{const o=window.innerWidth,u=Math.floor((o-qe)/(Xe-Y))||1,m=Qe(e||[],u);a(m)};return C.useEffect(()=>{if(e)return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[e]),!e||e.length===0?null:p.jsx("section",{className:"w-full py-12 overflow-visible",children:p.jsx("div",{className:"container mx-auto px-4 max-w-[calc(100vw-32px)]",children:r.map((o,u)=>p.jsx("div",{className:"flex justify-center items-start relative",style:{marginTop:u===0?0:-40,zIndex:10-u},children:o.map((m,y)=>p.jsx("div",{style:{marginLeft:y===0?0:`-${Y}px`},children:p.jsx(Je,{item:m,index:y,draggingId:t,topCardId:n,setTopCardId:s})},`${u}-${y}`))},u))})})};export{at as default};
